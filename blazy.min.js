/*===================================================================================================================
 * @name: [be]lazy
 * @type: javascript
 * @author: (c) Bjoern Klinggaard - @bklinggaard
 * @demo: http://dinbror.dk/blazy
 * @version: 1.0.1
 *==================================================================================================================*/
 var Blazy=function(l,m){function f(a){a=a||{};b.src=a.src||"data-src";b.multi=a.multi||!1;b.offset=a.offset||100;b.selector=a.selector||".b-lazy";b.onLoaded=a.onLoaded||!1;b.container=m.querySelector(a.container)||l;k=b.src;g=s(n,50);p=s(t,50);t();u(b.selector);v(b.multi,function(a){if(b.multi[a].width>=l.screen.width)return k=b.multi[a].src,!1});q(b.container,"scroll",g);q(b.container,"resize",g);q(b.container,"resize",p);n()}function n(){for(var a=0;a<d;a++){var e=h[a].getBoundingClientRect(),c=w+b.offset;if(0<=e.top&&0<=e.left&&e.top<=c||e.bottom<=c&&e.bottom>=0-b.offset)x(h[a]),h.splice(a,1),d-=1,a--}0===d&&f.prototype.destroy()}function x(a){if(0<a.offsetWidth&&0<a.offsetHeight&&-1===(" "+a.className+" ").indexOf(" loaded ")){var e=new Image,c=a.getAttribute(a.getAttribute(k)?k:b.src);v(b.multi,function(e){a.removeAttribute(b.multi[e].src)});a.removeAttribute(b.src);e.onload=function(){a.parent?a.parent.replaceChild(e,a):a.src=c;a.className+=" loaded";b.onLoaded(a)};e.src=c}}function u(a){a=m.querySelectorAll(a);for(var b=d=a.length;b--;h.unshift(a[b]));}function t(){w=l.innerHeight||m.documentElement.clientHeight}function q(a,b,c){a.attachEvent?a.attachEvent&&a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)}function r(a,b,c){a.detachEvent?a.detachEvent&&el.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)}function v(a,b){if(a&&b)for(var c=a.length,d=0;d<c&&!1!==b(d);d++);}function s(a,b){var c=0;return function(){var d=+new Date;d-c<b||(c=d,a.apply(this,arguments))}}var k,b={},d=0,w,h=[],g,p;f.prototype.revalidate=function(){u(b.selector);n()};f.prototype.load=function(a){x(a)};f.prototype.destroy=function(){r(b.container,"scroll",g);r(b.container,"resize",g);r(b.container,"resize",p);d=0;h=[]};return f}(window,document);

