/*===================================================================================================================
 * @name: [be]lazy (bLazy.js)
 * @type: javascript
 * @author: (c) Bjoern Klinggaard - @bklinggaard
 * @demo: http://dinbror.dk/blazy
 * @version: 1.0.0
 *==================================================================================================================*/
 var Blazy=function(k,l){function g(a){a=a||{};c.src=a.src||"data-src";c.multi=a.multi||!1;c.offset=a.offset||100;c.selector=a.selector||".b-lazy";c.onLoaded=a.onLoaded||!1;c.container=l.querySelector(a.container)||k;h=c.src;m(c.selector);if(c.multi){a=c.multi.length;for(var b=0;b<a;b++)if(c.multi[b].width>=k.screen.width){h=c.multi[b].src;break}}a=c.container;b=d;a.attachEvent?a.attachEvent&&a.attachEvent("onscroll",b):a.addEventListener("scroll",b,!1);a=c.container;b=d;a.attachEvent?a.attachEvent&&a.attachEvent("onresize",b):a.addEventListener("resize",b,!1);d()}function d(){for(var a=0;a<e;a++){var b=f[a].getBoundingClientRect(),d=(k.innerHeight||l.documentElement.clientHeight)+c.offset;if(0<=b.top&&0<=b.left&&b.top<=d||b.bottom<=d&&b.bottom>=0-c.offset)n(f[a]),f.splice(a,1),e-=1,a--}}function n(a){if(0<a.offsetWidth&&0<a.offsetHeight&&-1===(" "+a.className+" ").indexOf(" loaded ")){var b=new Image,d=a.getAttribute(a.getAttribute(h)?h:c.src);b.onload=function(){a.parent?a.parent.replaceChild(b,a):a.src=d;a.className+=" loaded";c.onLoaded(a)};b.src=d}}function m(a){a=l.querySelectorAll(a);for(var b=e=a.length;b--;f.unshift(a[b]));}var h,c={},e=0,f=[];g.prototype.revalidate=function(){m(c.selector);d()};g.prototype.load=function(a){n(a)};g.prototype.destroy=function(){var a=c.container,b=d;a.detachEvent?a.detachEvent&&el.detachEvent("onscroll",b):a.removeEventListener("scroll",b,!1);a=c.container;b=d;a.detachEvent?a.detachEvent&&el.detachEvent("onresize",b):a.removeEventListener("resize",b,!1);e=0;f=[]};return g}(window,document);

